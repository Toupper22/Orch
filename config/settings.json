{
  "$schema": "https://json-schema.org/draft-07/schema#",
  "_comment": "This is the SINGLE SOURCE OF TRUTH for project-wide settings. After editing this file, regenerate parameter files using: ./scripts/generate-common-params.sh and ./scripts/generate-integration-params.sh",
  "project": {
    "customerName": "efimademo",
    "projectName": "demoproject",
    "description": "Azure integration project for Dynamics 365 Finance and Operations"
  },
  "azure": {
    "location": "swedencentral",
    "locationShort": "sdc"
  },
  "naming": {
    "prefix": "edmo",
    "environment": {
      "dev": "dev",
      "test": "test",
      "uat": "uat",
      "prod": "prod"
    },
    "separator": "-"
  },
  "resourceGroups": {
    "common": {
      "enabled": true,
      "namingPattern": "{prefix}-{env}-common-rg"
    },
    "integration": {
      "namingPattern": "{prefix}-{env}-{integrationName}-rg"
    }
  },
  "tags": {
    "mandatory": {
      "Environment": "",
      "Customer": "",
      "Project": "",
      "ManagedBy": "Bicep",
      "CostCenter": ""
    },
    "optional": {
      "Owner": "",
      "Department": ""
    }
  },
  "commonInfrastructure": {
    "logAnalyticsWorkspace": {
      "enabled": true,
      "sku": "PerGB2018",
      "retentionInDays": 90,
      "dailyQuotaGb": -1
    },
    "keyVault": {
      "enabled": true,
      "sku": "standard",
      "enableRbacAuthorization": true,
      "enableSoftDelete": true,
      "softDeleteRetentionInDays": 90,
      "enablePurgeProtection": true,
      "networkAcls": {
        "defaultAction": "Deny",
        "bypass": "AzureServices"
      }
    },
    "storageAccount": {
      "enabled": true,
      "sku": "Standard_LRS",
      "kind": "StorageV2",
      "accessTier": "Hot",
      "minimumTlsVersion": "TLS1_2",
      "allowBlobPublicAccess": false,
      "containers": [
        {
          "name": "integration-files",
          "publicAccess": "None"
        },
        {
          "name": "logs",
          "publicAccess": "None"
        }
      ],
      "tables": [
        {
          "name": "Configuration"
        },
        {
          "name": "Logs"
        }
      ]
    },
    "appServicePlan": {
      "enabled": true,
      "sku": {
        "dev": "B1",
        "test": "B1",
        "uat": "B1",
        "prod": "S2"
      },
      "kind": "functionapp"
    },
    "managedIdentity": {
      "enabled": true,
      "type": "UserAssigned"
    },
    "serviceBus": {
      "enabled": true,
      "sku": "Standard",
      "capacity": 1
    },
    "apiConnections": {
      "enabled": true,
      "deployStorageTablesConnection": true
    },
    "network": {
      "enabled": true,
      "virtualNetwork": {
        "addressPrefixes": [
          "10.0.0.0/16"
        ]
      },
      "subnets": [
        {
          "name": "integration-subnet",
          "addressPrefix": "10.0.1.0/24",
          "description": "Subnet for integration resources (Function Apps, Logic Apps)"
        },
        {
          "name": "private-endpoint-subnet",
          "addressPrefix": "10.0.2.0/24",
          "description": "Subnet for private endpoints"
        }
      ],
      "natGateway": {
        "enabled": true,
        "idleTimeoutInMinutes": 4
      }
    }
  },
  "integrationDefaults": {
    "logicApp": {
      "enabled": true,
      "sku": "Standard"
    },
    "functionApp": {
      "enabled": false,
      "runtime": "dotnet",
      "version": "8"
    }
  },
  "security": {
    "enablePrivateEndpoints": false,
    "allowedIpAddresses": ["217.149.56.100/32"],
    "enableDiagnostics": true,
    "externalLogAnalyticsWorkspaceId": ""
  },
  "environments": {
    "dev": {
      "enabled": true,
      "location": "swedencentral"
    },
    "test": {
      "enabled": true,
      "location": "swedencentral"
    },
    "uat": {
      "enabled": true,
      "location": "swedencentral"
    },
    "prod": {
      "enabled": true,
      "location": "swedencentral"
    }
  }
}
